<form novalidate autocomplete="off" [formGroup]="formClient">
  <nb-card>
    <nb-card-header>
      <ng-container *ngIf="f.first_name.value; else elseNewUser">
        {{ f.first_name.value | uppercase }}
        {{ f.last_name.value | uppercase }}
      </ng-container>
      <ng-template #elseNewUser> New User </ng-template>
    </nb-card-header>
    <nb-card-body>
      <div class="row">
        <div class="col-12 col-md-6">
          <div class="form-group">
            <label for="">First Name</label>
            <input
              type="text"
              name="first_name"
              formControlName="first_name"
              nbInput
              fullWidth
              [status]="
                (submitted || f.first_name.touched) && f.first_name.errors
                  ? 'danger'
                  : ''
              "
            />
            <div
              *ngIf="(submitted || f.first_name.touched) && f.first_name.errors"
              class="card-text"
            >
              <small
                *ngIf="f.first_name.errors?.required"
                class="text-muted text-muted-danger"
              >
                Field required
              </small>
              <small
                *ngIf="f.first_name.errors?.minlength"
                class="text-muted text-muted-danger"
              >
                First name is short, requires at least
                {{ f.first_name.errors?.minlength.requiredLength }} characters
              </small>

              <small
                *ngIf="f.first_name.errors?.maxlength"
                class="text-muted text-muted-danger"
              >
                First name is long, maximun
                {{ f.first_name.errors?.maxlength.requiredLength }} characters
                allowed
              </small>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-6">
          <div class="form-group">
            <label for="name">Last Name</label>
            <input
              type="text"
              name="last_name"
              formControlName="last_name"
              nbInput
              fullWidth
              [status]="
                (submitted || f.last_name.touched) && f.last_name.errors
                  ? 'danger'
                  : ''
              "
            />
            <div
              *ngIf="(submitted || f.last_name.touched) && f.last_name.errors"
              class="card-text"
            >
              <small
                *ngIf="f.last_name.errors?.required"
                class="text-muted text-muted-danger"
              >
                Field required
              </small>
              <small
                *ngIf="f.last_name.errors?.minlength"
                class="text-muted text-muted-danger"
              >
                Last name is short, requires at least
                {{ f.last_name.errors?.minlength.requiredLength }} characters
              </small>

              <small
                *ngIf="f.last_name.errors?.maxlength"
                class="text-muted text-muted-danger"
              >
                Last name is long, maximun
                {{ f.last_name.errors?.maxlength.requiredLength }} characters
                allowed
              </small>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-6">
          <div class="form-group">
            <label for="name">Email</label>
            <input
              type="text"
              name="email"
              formControlName="email"
              nbInput
              fullWidth
              [status]="
                (submitted || f.email.touched) && f.email.errors ? 'danger' : ''
              "
            />
            <div
              *ngIf="(submitted || f.email.touched) && f.email.errors"
              class="card-text"
            >
              <small
                *ngIf="f.email.errors?.required"
                class="text-muted text-muted-danger"
              >
                Field required
              </small>
              <small
                *ngIf="f.email.errors?.pattern"
                class="text-muted text-muted-danger"
              >
                Email invalid
              </small>
              <small
                *ngIf="f.email.errors?.emailExist"
                class="text-muted text-muted-danger"
              >
                The email already exist
              </small>
            </div>
          </div>
        </div>

        <div class="col-12" *ngIf="showBio">
          <div class="form-group">
            <label for="name">Bio</label>
            <nb-badge [text]="f.bio.value.length" position="top right">
            </nb-badge>
            <textarea
              name="bio"
              rows="5"
              placeholder="Text Area"
              nbInput
              fullWidth
              shape="semi-round"
              formControlName="bio"
              [status]="
                (submitted || f.bio.touched) && f.bio.errors ? 'danger' : ''
              "
            ></textarea>
            <div
              *ngIf="(submitted || f.bio.touched) && f.bio.errors"
              class="card-text"
            >
              <small
                *ngIf="f.bio.errors?.maxlength"
                class="text-muted text-muted-danger"
              >
                Email invalid
              </small>
            </div>
          </div>
        </div>

        <div class="clearFix"></div>
      </div>
    </nb-card-body>
    <nb-card-footer>
      <button nbButton status="success" type="button" (click)="saveUser()">
        Save
      </button>
    </nb-card-footer>
  </nb-card>
</form>
